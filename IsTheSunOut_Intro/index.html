<html>
<head>
<title>Is the Sun Out</title>
</head>
<link rel="stylesheet" href="main.css">
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-color.v0.5.min.js"></script>
<script src="https://d3js.org/d3-hsv.v0.0.min.js"></script>
<link rel="stylesheet" href="Libraries/animate.css">
<body>
<div id= "background"></div>
<img id= "arrow" src = "Assets/arr.png" onClick="intro_v1()">
<img id= "main_image" src = "Assets/Main_image.png">

<div id= "description" > In Seattle, they have a saying <br>
<br>
 &#34If you don&#39t like the weather, wait five minutes and then shoot yourself in the face&#34
 <br><br>
The project aims to understand the emphasis of weather on the culture of Seattle. It is expected that the number of checkouts of books from SEATTLE PUBLIC LIBRARY corresponds to the weather and hence the overall mood of the city depends on the day.
<br><br>
Does the weather in Seattle really effect people and their activities, or is it just an assumption we make? </div>

<div id="buttons_for_each_viz"><div>


<script>

var current_url = window.location.href;
var parameter_string = current_url.split("?")[1];

var click = 0; 
var number_of_clicks =0;

if(parameter_string){
	click = parseInt(parameter_string.split("=")[1]);
	var number_of_clicks = (click==0) ? 0:click; 
	console.log(number_of_clicks);
	intro_v1();
}


var years = 8; 
var dewey = 12;

var padding = {"top":50,"bottom":50 ,"left":50,"right":50}

var dim1 = (window.innerHeight-padding.top-padding.bottom)/years;
var dim2 = (window.innerWidth-padding.left-padding.right)/dewey;
var final_dim = dim1;
var which_one = 0; 

if(dim2<dim1){final_dim = dim2;which_one=1}

var elem = d3.select("#buttons_for_each_viz");
elem.style("top",padding.top);
elem.style("left",padding.left);


if (which_one)
{
	var left_over_height = window.innerHeight - (dim2*years);
	elem.style("top",left_over_height/2)
}
else
{
	var left_over_width = window.innerWidth - (dim1*dewey);
	elem.style("left",left_over_width/2)
}

for ( var y = 0 ; y<years ;y++){
	for ( var d = 0 ; d<dewey ;d++){
		elem.append("img")
			.attr("src","Assets/year_"+y+"_"+d+".png")
			.attr("class","buttons")
			.attr("width",final_dim)
			.attr("height",final_dim)
			.attr("year",y)
			.attr("dew",d)
			.style("top",y*final_dim)
			.style("left",d*final_dim)
			.style("opacity",1.0)
			.on("mouseover",function(d){
				d3.select(this).style("opacity",0.5)
			})
			.on("mouseleave",function(d){
					d3.select(this).style("opacity",1.0)
				})
			.on("click",function(d){
				location.href="IsTheSunOut_D3/index.html?year="+d3.select(this).attr("year")+"&dew="+d3.select(this).attr("dew");
			})


	}
}

function intro_v1()
{
	number_of_clicks++;
	if(number_of_clicks == 1)
	{
		$("#main_image").css("opacity",0.0);
		$("#description").css("opacity",0.6);
	}
	else if (number_of_clicks == 2)
	{
		$("#main_image").css("opacity",0.0);
		$("#description").css("opacity",0.0);
		$("#arrow").css("opacity",0.0);
		$("#buttons_for_each_viz").css("opacity",1.0);
	}
}




</script>

</body>
</html>